<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AKHUENO PROJECT ‚Äî –ù–ê–•–£–ô ‚ù§</title>
  <!-- –ó–∞–≥—Ä—É–∂–∞–µ–º TonConnect SDK -->
  <script src="https://unpkg.com/@tonconnect/sdk@2.0.0/dist/tonconnect-sdk.min.js"></script>
  <style>
    :root {
      --bg: #000;
      --fg: #e0e0e0;
      --accent: #f00;
      --secondary: #0041f0;
      --card-bg: rgba(10, 10, 15, 0.9);
      --era-color: #00aaff;
      --date-color: #66b2ff;
      --shadow: rgba(240, 0, 0, 0.3);
    }

    .light {
      --bg: #fff;
      --fg: #222;
      --accent: #b30000;
      --secondary: #0033cc;
      --card-bg: rgba(250, 250, 255, 0.95);
      --era-color: #0055cc;
      --date-color: #0077dd;
      --shadow: rgba(179, 0, 0, 0.2);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: system-ui, -apple-system, 'Segoe UI', sans-serif;
      transition: background-color 0.4s, color 0.4s;
    }

    body {
      background: var(--bg);
      color: var(--fg);
      min-height: 100vh;
      padding: 20px;
      overflow-x: hidden;
      position: relative;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    .theme-toggle {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 50px;
      height: 26px;
      background: var(--bg);
      border: 2px solid var(--accent);
      border-radius: 13px;
      cursor: pointer;
      display: flex;
      align-items: center;
      padding: 2px;
      z-index: 100;
    }

    .toggle-thumb {
      width: 20px;
      height: 20px;
      background: var(--accent);
      border-radius: 50%;
      transition: transform 0.3s ease;
    }

    .light .toggle-thumb {
      transform: translateX(22px);
      background: var(--secondary);
    }

    /* Floating logo */
    .logo-wrapper {
      display: block;
      width: 160px;
      height: 160px;
      margin: 0 auto 20px;
      animation: floating 6s ease-in-out infinite;
      cursor: pointer;
      position: relative;
    }

    .logo-wrapper:hover {
      transform: scale(1.05);
      animation: none;
    }

    .logo {
      width: 100%;
      height: 100%;
      border: 3px solid var(--secondary);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 25px rgba(240, 0, 0, 0.6);
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .logo img {
      width: 90%;
      height: 90%;
      object-fit: contain;
    }

    @keyframes floating {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-20px); }
    }

    h1 {
      font-size: 2.4rem;
      font-weight: 800;
      color: var(--accent);
      text-align: center;
      margin: 10px 0;
      letter-spacing: -0.5px;
    }

    .tagline {
      font-size: 1.05rem;
      color: var(--fg);
      opacity: 0.8;
      font-style: italic;
      text-align: center;
      margin: 10px 0 30px;
    }

    .wallet-info {
      text-align: center;
      margin: 20px 0 30px;
      opacity: 0;
      height: 0;
      overflow: hidden;
      transition: all 0.5s ease;
    }

    .wallet-info.active {
      opacity: 1;
      height: auto;
      margin: 20px 0 30px;
    }

    .wallet-address {
      font-family: monospace;
      font-size: 1rem;
      color: var(--secondary);
      background: rgba(0, 65, 240, 0.15);
      padding: 6px 12px;
      border-radius: 8px;
      display: inline-block;
      margin: 8px 0;
      word-break: break-all;
    }

    .token-balance {
      font-size: 1.2rem;
      font-weight: bold;
      color: var(--accent);
      margin-top: 8px;
    }

    .nav-buttons {
      text-align: center;
      margin: 30px 0;
    }

    .nav-btn {
      background: linear-gradient(45deg, var(--accent), #ff4d4d);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 50px;
      font-weight: bold;
      font-size: 1rem;
      cursor: pointer;
      margin: 0 10px;
      box-shadow: 0 0 15px rgba(255, 0, 0, 0.5);
    }

    .section {
      display: none;
    }

    .section.active {
      display: block;
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .roadmap {
      margin-top: 30px;
    }

    .era {
      margin: 40px 0 30px;
    }

    .era-title {
      font-size: 1.3rem;
      font-weight: bold;
      color: var(--era-color);
      text-align: center;
      margin-bottom: 20px;
    }

    .milestone {
      background: rgba(30, 30, 40, 0.6);
      border-left: 4px solid var(--accent);
      padding: 20px;
      margin: 15px 0;
      border-radius: 12px;
      opacity: 0;
      transform: translateY(20px);
      animation: slideIn 0.5s forwards;
    }

    .light .milestone {
      background: rgba(240, 240, 250, 0.7);
    }

    .milestone:nth-child(n) { animation-delay: calc(0.1s * var(--i)); }

    @keyframes slideIn {
      to { opacity: 1; transform: translateY(0); }
    }

    .milestone-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--fg);
      margin-bottom: 8px;
    }

    .milestone-date {
      font-size: 0.9rem;
      color: var(--date-color);
      margin-bottom: 10px;
    }

    .milestone-desc {
      font-size: 0.95rem;
      line-height: 1.5;
      color: var(--fg);
      opacity: 0.9;
    }

    .end-note {
      text-align: center;
      margin-top: 50px;
      font-size: 1.2rem;
      color: var(--accent);
    }

    .footer {
      text-align: center;
      color: var(--fg);
      opacity: 0.7;
      font-size: 0.95rem;
      margin-top: 50px;
      padding-top: 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.08);
    }

    @media (max-width: 768px) {
      .nav-btn { display: block; margin: 10px auto; width: 80%; }
      h1 { font-size: 2rem; }
      .logo-wrapper { width: 130px; height: 130px; }
      @keyframes floating { 50% { transform: translateY(-15px); } }
    }
  </style>
</head>
<body>
  <div class="theme-toggle" id="themeToggle">
    <div class="toggle-thumb"></div>
  </div>

  <div class="container">
    <div id="home" class="section active">
      <div class="logo-wrapper" id="logoClickable">
        <div class="logo">
          <img src="Logo.png" alt="Akhueno Project Logo">
        </div>
      </div>

      <div class="wallet-info" id="walletInfo">
        <div class="wallet-address" id="walletAddress"></div>
        <div class="token-balance" id="tokenBalance">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
      </div>

      <h1>AKHUENO PROJECT</h1>
      <p class="tagline">–ù–æ–≤–∞—è –≤–µ—Ö–∞ –≤ —Å–æ—Ü–∏–∞–ª—å–Ω–æ-—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö –º–µ–∂–¥—É –ª—é–¥—å–º–∏. –ò–ª–∏ –Ω–µ—Ç. –ù–æ –Ω–∞—Ö—É–π ‚ù§</p>

      <div class="nav-buttons">
        <button class="nav-btn" onclick="showSection('roadmap')">–î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞ –ù–∞—Ö—É–π‚ô•Ô∏è</button>
      </div>

      <div class="footer">
        <p>üîÆ –ß–¢–û –ë–£–î–ï–¢ –î–ê–õ–¨–®–ï?</p>
        <p>–•—É–π –∑–Ω–∞–µ—Ç, –Ω–∞—Ö—É–π ‚ù§</p>
      </div>
    </div>

    <div id="roadmap" class="section">
      <h1 style="text-align:center; margin-bottom:30px;">üöÄ NAKHUY ROADMAP 2124 EDITION</h1>
      <p style="text-align:center; opacity:0.8; margin-bottom:40px;">(—Å–æ—Å—Ç–∞–≤–ª–µ–Ω–æ –ø—Ä–∏ –ø–æ–ª–Ω–æ–π –ª—É–Ω–µ, –Ω–∞—Ö—É–π ‚ù§)</p>

      <div class="roadmap">
        <!-- ... –≤–∞—à roadmap –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ... -->
        <!-- –î–ª—è –∫—Ä–∞—Ç–∫–æ—Å—Ç–∏ –æ—Å—Ç–∞–≤–∏–º –∫–∞–∫ –µ—Å—Ç—å, –Ω–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –∫–æ–¥–µ –æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é -->
        <div class="era">
          <div class="era-title">üåë 2025‚Äì2030: –≠–ü–û–•–ê –•–ê–û–¢–ò–ß–ù–û–ì–û –°–¢–ê–†–¢–ê</div>
          <div class="milestone" style="--i:1;">
            <div class="milestone-title">ü™ô –õ–∏—Å—Ç–∏–Ω–≥ –Ω–∞ Blum</div>
            <div class="milestone-date">01.06.2025 13:57+3 UTC</div>
            <div class="milestone-desc">–ù–∞–∫–æ–Ω–µ—Ü-—Ç–æ –≤—ã —Å–º–æ–∂–µ—Ç–µ –∫—É–ø–∏—Ç—å –Ω–∞—Å –∑–∞ —Å–≤–æ–∏ –∫—Ä–æ–≤–Ω—ã–µ, —Å—É–∫–∞, –Ω–∞—Ö—É–π ‚ù§. –ü–µ—Ä–≤—ã–µ 15 –º–∏–Ω—É—Ç ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ –ø—Ä–æ—Å–Ω—É–ª—Å—è. –û—Å—Ç–∞–ª—å–Ω—ã–µ –æ–ø–æ–∑–¥–∞–ª–∏ –Ω–∞ –≤–µ—á–µ—Ä–∏–Ω–∫—É.</div>
          </div>
        </div>
      </div>

      <div class="end-note">‚Üí ‚àû<br><br>–•—É–π –∑–Ω–∞–µ—Ç, –Ω–∞—Ö—É–π ‚ù§</div>

      <div class="nav-buttons" style="margin-top:40px;">
        <button class="nav-btn" onclick="showSection('home')">‚Üê –ù–∞–∑–∞–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é</button>
      </div>
    </div>
  </div>

  <script>
    // === –ö–û–ù–°–¢–ê–ù–¢–´ ===
    const JETTON_MASTER = 'EQA6usPqmsa9I2QHrDUTW_c6xj0v6WPwffyW9uXiwjKBLwBX';
    const TON_CENTER_API = 'https://toncenter.com/api/v2/jsonRPC';

    // === DOM ===
    const logoClickable = document.getElementById('logoClickable');
    const walletInfo = document.getElementById('walletInfo');
    const walletAddressEl = document.getElementById('walletAddress');
    const tokenBalanceEl = document.getElementById('tokenBalance');

    // === THEME ===
    const toggle = document.getElementById('themeToggle');
    if (localStorage.getItem('theme') === 'light') {
      document.body.classList.add('light');
    }
    toggle.addEventListener('click', () => {
      document.body.classList.toggle('light');
      localStorage.setItem('theme', document.body.classList.contains('light') ? 'light' : 'dark');
    });

    // === NAVIGATION ===
    function showSection(id) {
      document.querySelectorAll('.section').forEach(el => el.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      window.scrollTo(0, 0);
    }

    // === TON CONNECT –î–õ–Ø TELEGRAM MINI APPS ===
    let tonClient;
    let userAddress = null;

    document.addEventListener('DOMContentLoaded', async () => {
      try {
        // 1. –°–æ–∑–¥–∞–µ–º TonConnect –∫–ª–∏–µ–Ω—Ç
        tonClient = new TonConnect({
          manifestUrl: 'https://nakhuyproject.github.io/akhueno-project/tonconnect-manifest.json'
        });

        // 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–ø—É—â–µ–Ω–æ –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram
        const isTelegram = typeof window.Telegram !== 'undefined' && window.Telegram.WebApp;

        if (isTelegram) {
          // 3. –ò—Å–ø–æ–ª—å–∑—É–µ–º Telegram –∫–∞–∫ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä
          await tonClient.restoreConnection();
        }

        // 4. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ—à–µ–ª—å–∫–∞
        tonClient.onStatusChange(wallet => {
          if (wallet) {
            userAddress = wallet.account.address;
            walletAddressEl.textContent = userAddress;
            walletInfo.classList.add('active');
            fetchJettonBalance(userAddress);
          } else {
            userAddress = null;
            walletInfo.classList.remove('active');
          }
        });

        // 5. –ö–ª–∏–∫ –ø–æ –ª–æ–≥–æ—Ç–∏–ø—É ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
        logoClickable.addEventListener('click', () => {
          if (!userAddress) {
            // –í Telegram —ç—Ç–æ –≤—ã–∑–æ–≤–µ—Ç –Ω–∞—Ç–∏–≤–Ω—ã–π –≤—ã–±–æ—Ä –∫–æ—à–µ–ª—å–∫–∞
            tonClient.connect();
          }
        });

      } catch (error) {
        console.error('TonConnect init error:', error);
        // –ú–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å fallback –∫–Ω–æ–ø–∫—É
        alert('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ—à–µ–ª—å–∫–∞. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.');
      }
    });

    // === –§–£–ù–ö–¶–ò–ò –ë–ê–õ–ê–ù–°–ê ===
    async function fetchJettonBalance(address) {
      try {
        const jettonWalletRes = await fetch(TON_CENTER_API, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            jsonrpc: '2.0',
            id: 1,
            method: 'runGetMethod',
            params: {
              address: JETTON_MASTER,
              method: 'get_wallet_address',
              stack: [{ type: 'slice', value: address }]
            }
          })
        });

        const jettonWalletData = await jettonWalletRes.json();
        if (!jettonWalletData.result?.stack) {
          tokenBalanceEl.textContent = '–ë–∞–ª–∞–Ω—Å: –æ—à–∏–±–∫–∞';
          return;
        }

        const jettonWalletAddrCell = jettonWalletData.result.stack[0];
        if (jettonWalletAddrCell.type !== 'cell_slice') {
          tokenBalanceEl.textContent = '–ë–∞–ª–∞–Ω—Å: –æ—à–∏–±–∫–∞';
          return;
        }

        const addrBase64 = jettonWalletAddrCell.cell;
        const jettonWalletAddr = bufferToAddress(addrBase64);

        const balanceRes = await fetch(TON_CENTER_API, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            jsonrpc: '2.0',
            id: 2,
            method: 'runGetMethod',
            params: {
              address: jettonWalletAddr,
              method: 'get_wallet_data',
              stack: []
            }
          })
        });

        const balanceData = await balanceRes.json();
        if (!balanceData.result?.stack) {
          tokenBalanceEl.textContent = '–ë–∞–ª–∞–Ω—Å: –æ—à–∏–±–∫–∞';
          return;
        }

        const balance = balanceData.result.stack[0];
        if (balance.type !== 'int') {
          tokenBalanceEl.textContent = '–ë–∞–ª–∞–Ω—Å: –æ—à–∏–±–∫–∞';
          return;
        }

        const balanceNum = BigInt(balance.value);
        const formattedBalance = (Number(balanceNum) / 1e9).toLocaleString(undefined, {
          minimumFractionDigits: 0,
          maximumFractionDigits: 9
        });

        tokenBalanceEl.textContent = `–ë–∞–ª–∞–Ω—Å: ${formattedBalance} NAKHUY`;
      } catch (err) {
        console.error('Balance fetch error:', err);
        tokenBalanceEl.textContent = '–ë–∞–ª–∞–Ω—Å: –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω';
      }
    }

    function bufferToAddress(base64) {
      const bytes = Uint8Array.from(atob(base64), c => c.charCodeAt(0));
      const workchain = bytes[0];
      const hash = bytes.slice(2, 34);
      const fullAddr = String.fromCharCode(workchain) + String.fromCharCode(...hash);
      return `EQ${btoa(fullAddr).replace(/\+/g, '-').replace(/\//g, '_').replace(/=/g, '')}`;
    }
  </script>
</body>
</html>

